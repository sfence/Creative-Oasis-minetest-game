name: GitHub â†’ Discord Notify

on:
  push:
  pull_request:
  issues:
  release:
  fork:
  watch:
  create:
  delete:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord message
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
          DISCORD_MESSAGE: |
            # Pull Requests â€” using your simple working PR code
            ${{ github.event_name == 'pull_request' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s', github.repository, github.event_name, github.actor) || '' }}

            # Push commits
            ${{ github.event_name == 'push' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s\n**Commits:**\n%s', github.repository, github.event_name, github.actor, join(github.event.commits.*.message, '\n')) || '' }}

            # Issues
            ${{ github.event_name == 'issues' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s\n**Issue:** [%s](%s)', github.repository, github.event_name, github.actor, github.event.issue.title, github.event.issue.html_url) || '' }}

            # Release
            ${{ github.event_name == 'release' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s\n**Release:** [%s](%s)', github.repository, github.event_name, github.actor, github.event.release.name, github.event.release.html_url) || '' }}

            # Fork
            ${{ github.event_name == 'fork' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s\n**Forked Repo:** [%s](%s) by [%s](https://github.com/%s)', github.repository, github.event_name, github.actor, github.event.forkee.full_name, github.event.forkee.html_url, github.event.forkee.owner.login, github.event.forkee.owner.login) || '' }}

            # Watch (stars)
            ${{ github.event_name == 'watch' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s\nâ­ %s starred the repository', github.repository, github.event_name, github.actor, github.actor) || '' }}

            # Create/Delete
            ${{ github.event_name == 'create' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s\n**Created %s:** %s', github.repository, github.event_name, github.actor, github.event.ref_type, github.event.ref) || '' }}
            ${{ github.event_name == 'delete' && format('ğŸ“¦ **GitHub Event**\nRepo: %s\nEvent: %s\nBy: %s\n**Deleted %s:** %s', github.repository, github.event_name, github.actor, github.event.ref_type, github.event.ref) || '' }}
